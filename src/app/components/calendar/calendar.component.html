<div class="container">
  <div class="calendar">
    <div class="calendar-header">
      <mat-button-toggle-group>
        <mat-button-toggle
          mwlCalendarPreviousView
          [view]="view"
          [(viewDate)]="viewDate"
          (viewDateChange)="closeOpenMonthViewDay()"
          >Vorherige</mat-button-toggle
        >
        <mat-button-toggle mwlCalendarToday [(viewDate)]="viewDate"
          >Heue</mat-button-toggle
        >
        <mat-button-toggle
          mwlCalendarNextView
          [view]="view"
          [(viewDate)]="viewDate"
          (viewDateChange)="closeOpenMonthViewDay()"
          >NÃ¤chste</mat-button-toggle
        >
      </mat-button-toggle-group>

      <h2>{{ viewDate | calendarDate: view + "ViewTitle":"de" }}</h2>

      <mat-button-toggle-group [value]="view" (valueChange)="setView($event)">
        <mat-button-toggle [value]="CalendarView.Month"
          >Monat</mat-button-toggle
        >
        <mat-button-toggle [value]="CalendarView.Week">Woche</mat-button-toggle>
        <mat-button-toggle [value]="CalendarView.Day">Tag</mat-button-toggle>
      </mat-button-toggle-group>
    </div>

    <br />

    <div [ngSwitch]="view">
      <mwl-calendar-month-view
        *ngSwitchCase="CalendarView.Month"
        [viewDate]="viewDate"
        [events]="data.events"
        [refresh]="refresh"
        [activeDayIsOpen]="activeDayIsOpen"
        [locale]="locale"
        (dayClicked)="dayClicked($event.day)"
        (eventClicked)="handleEvent('Clicked', $event.event)"
        (eventTimesChanged)="eventTimesChanged($event)"
      >
      </mwl-calendar-month-view>
      <mwl-calendar-week-view
        *ngSwitchCase="CalendarView.Week"
        [viewDate]="viewDate"
        [events]="data.events"
        [refresh]="refresh"
        [locale]="locale"
        (eventClicked)="handleEvent('Clicked', $event.event)"
        (eventTimesChanged)="eventTimesChanged($event)"
      >
      </mwl-calendar-week-view>
      <mwl-calendar-day-view
        *ngSwitchCase="CalendarView.Day"
        [viewDate]="viewDate"
        [events]="data.events"
        [refresh]="refresh"
        [locale]="locale"
        (eventClicked)="handleEvent('Clicked', $event.event)"
        (eventTimesChanged)="eventTimesChanged($event)"
      >
      </mwl-calendar-day-view>
    </div>
  </div>

  <!-- Everything you see below is just for the demo, you don't need to include it in your app -->

  <br /><br /><br />

  <h3>Edit events</h3>
  <button mat-flat-button (click)="addEvent()">Add new</button>

  <div class="table-responsive">
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>Title</th>
          <th>Primary color</th>
          <th>Secondary color</th>
          <th>Starts at</th>
          <th>Ends at</th>
          <th>Remove</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let event of data.events">
          <td>
            <mat-form-field>
              <mat-label>Title</mat-label>
              <input
                matInput
                type="text"
                [(ngModel)]="event.title"
                (keyup)="refresh.next()"
              />
            </mat-form-field>
          </td>
          <td>
            <input
              type="color"
              [(ngModel)]="event.color!.primary"
              (change)="refresh.next()"
            />
          </td>
          <td>
            <input
              type="color"
              [(ngModel)]="event.color!.secondary"
              (change)="refresh.next()"
            />
          </td>
          <td>
            <input
              type="text"
              mwlFlatpickr
              [(ngModel)]="event.start"
              (ngModelChange)="refresh.next()"
              [altInput]="true"
              [convertModelValue]="true"
              [enableTime]="true"
              dateFormat="Y-m-dTH:i"
              altFormat="F j, Y H:i"
              placeholder="Not set"
            />
          </td>
          <td>
            <input
              type="text"
              mwlFlatpickr
              [(ngModel)]="event.end"
              (ngModelChange)="refresh.next()"
              [altInput]="true"
              [convertModelValue]="true"
              [enableTime]="true"
              dateFormat="Y-m-dTH:i"
              altFormat="F j, Y H:i"
              placeholder="Not set"
            />
          </td>
          <td>
            <button mat-flat-button color="warn" (click)="deleteEvent(event)">
              Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
